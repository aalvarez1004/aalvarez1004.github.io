<!DOCTYPE html>
<html>
<head>
    <title>Rosa de Vientos</title>
    <script src="https://d3js.org/d3.v5.min.js"></script>
</head>
<body>
    <div id="chart"></div>
    <script>
        // Datos de ejemplo
        var data = [
            {direction: 'N', value: 0.1},
            {direction: 'NE', value: 0.15},
            {direction: 'E', value: 0.08},
            {direction: 'SE', value: 0.12},
            {direction: 'S', value: 0.11},
            {direction: 'SW', value: 0.2},
            {direction: 'W', value: 0.13},
            {direction: 'NW', value: 0.11}
        ];

        // Configuración del gráfico
        var width = 500, height = 500;
        var margin = {top: 50, right: 50, bottom: 50, left: 50};
        var innerRadius = 50, outerRadius = Math.min(width, height) / 2 - margin.top - margin.bottom;

        // Crear una escala ordinal para las direcciones
        var x = d3.scaleBand()
            .range([0, 2 * Math.PI])
            .align(0)
            .domain(data.map(function(d) { return d.direction; }));

        // Crear una escala lineal para los valores
        var y = d3.scaleLinear()
            .range([innerRadius, outerRadius])
            .domain([0, d3.max(data, function(d) { return d.value; })]);

        // Crear un generador de arcos
        var arc = d3.arc()
            .innerRadius(innerRadius)
            .outerRadius(function(d) { return y(d.value); })
            .startAngle(function(d) { return x(d.direction); })
            .endAngle(function(d) { return x(d.direction) + x.bandwidth(); })
            .padAngle(0.01)
            .padRadius(innerRadius);

        // Crear el SVG
        var svg = d3.select('#chart').append('svg')
            .attr('width', width)
            .attr('height', height)
            .append('g')
            .attr('transform', 'translate(' + width / 2 + ',' + height / 2 + ')');

        // Dibujar los arcos
        svg.selectAll('path')
            .data(data)
            .enter().append('path')
            .attr('d', arc)
            .style('fill', 'blue')
            .style('stroke', 'white')
            .style('opacity', 0.7);
    </script>
</body>
</html>
